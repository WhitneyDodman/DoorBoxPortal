<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <body>
        <ui:composition template="./WEB-INF/templates/global.xhtml">
            <ui:param name="title" value="Welcome!"/>
            <ui:param name="metaDescription" value="Confirm your account registration"/>
            <ui:param name="metaKeywords" value="doorbox user and asset management portal"/>
            <ui:define name="htmlhead">
                <meta http-equiv="refresh" content="5;url=login.xhtml"/>
            </ui:define>
            <ui:define name="content">
                <main class="wrapper main-content" role="main">
                    <c:if test="#{!accountRegistrationConfirmationBean.registrationRequestValid}">
                        <p:panel id="panel" header="Confirm Account Registration">
                            <table width="100%" style="table-border: none;">
                                <tr>
                                    <td valign="top" colspan="3" align="left">
                                        <div class="hintText">The requested link to confirm your account registration has timed out.</div>
                                    </td>
                                </tr>
                                <tr align="center">
                                    <td colspan="2" align="right">
                                        <h:link value="Return to the login page" outcome="login.xhtml"/>
                                    </td>
                                </tr>
                            </table>
                        </p:panel>
                    </c:if>
                    <c:if test="#{accountRegistrationConfirmationBean.registrationRequestValid}">
                        <h:form id="userRegForm">                        
                            <p:panel id="panel" header="Reset Password">

                                <f:event listener="#{accountRegistrationConfirmationBean.validateRegistration}" type="postValidate" />
                                <p:messages id="messages" showSummary="true" showDetail="false" autoUpdate="true" closable="true" />
                                    
                                <h:panelGrid columns="2">

                                    <p>Thank you for confirming your account registration. You will now be redirected to the login page</p>
                                    
                                    <h:link value="Proceed to the login page (you will be redirected in 5 seconds)" outcome="login.xhtml"/>

                                </h:panelGrid>
                            </p:panel>
                        </h:form>                
                    </c:if>
                </main>
            </ui:define>
        </ui:composition>
    </body>
</html>